{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector(\"form\");\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nfunction showLoader() {\n    loader.classList.remove('hidden');\n  }\n  \n  function hideLoader() {\n    loader.classList.add('hidden');\n  }\nhideLoader()\n  \n\nform.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n    const query = event.currentTarget.elements.query.value;\n    if (query.length < 3) {\n        iziToast.error({\n            message: `Your length is not enough. Min 3 letters`,\n            position: 'topRight',\n        });\n\n\n    } else {\n        renderImages(query);\n    }\n});\n\nconst fetchImages = (query = \"\") => {\n    const searchParams = new URLSearchParams({\n        key: `41516813-c0516a6d5bb80b940f21213c5`,\n        q: query,\n        image_type: `photo`,\n        orientation: `horizontal`,\n        safesearch: true,\n    });\n    \n    return fetch(`https://pixabay.com/api/?${searchParams}`)\n        .then(response => {\n            if (response.ok) {\n                return response.json();\n            } else {\n                throw new Error(`Error`);\n            }\n        })\n}\n\nfunction generateImageGalleryMarkup(images) {\n\n    const imageHTML = images.reduce((html, { webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return html + `\n            <div class=\"gallery-item\">\n                <a href=\"${largeImageURL}\" data-lightbox=\"image\">\n                    <img src=\"${webformatURL}\" data-source=\"${largeImageURL}\" alt=\"${tags}\">\n                </a>\n                <div class=\"text\">\n                <div class=\"text-item\"><p class=\"likes\">Likes:</p>\n                <p class=\"likes\"> ${likes}</p></div>\n                \n               <div  class=\"text-item\"> <p class=\"views\">Views: </p>\n                <p class=\"views\">${views}</p></div>\n               <div  class=\"text-item\"> <p class=\"comments\">Comments:</p>\n                <p class=\"comments\"> ${comments}</p></div>\n               <div  class=\"text-item\"><p class=\"downloads\">Downloads:</p>\n                <p class=\"downloads\"> ${downloads}</p></div>\n                \n                </div>\n                \n            </div>`;\n    }, '');\n    gallery.insertAdjacentHTML(\"afterbegin\", imageHTML);\n    return;\n \n}\n\nfunction renderImages(query) {\n    showLoader();\n    gallery.innerHTML = \"\";\n\n    fetchImages(query)\n        .then(images => {\n            hideLoader();\n            if (images.hits.length === 0) {\n                iziToast.error({\n                    message: `Sorry, there are no images matching your search query. Please try again!`,\n                    position: 'topRight',\n                });\n            } else { \n               \n                generateImageGalleryMarkup(images.hits);\n            const lightbox = new SimpleLightbox('.gallery a', {});\n            lightbox.refresh();\n        }   \n        })\n        .catch(error => {\n            hideLoader();\n            iziToast.error({\n                message: `Error`,\n                position: 'topRight',\n            });}\n            );\n}\n"],"names":["form","gallery","loader","showLoader","hideLoader","event","query","iziToast","renderImages","fetchImages","searchParams","response","generateImageGalleryMarkup","images","imageHTML","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","error"],"mappings":"6vBAOA,MAAMA,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAE/C,SAASC,GAAa,CAClBD,EAAO,UAAU,OAAO,QAAQ,CACjC,CAED,SAASE,GAAa,CACpBF,EAAO,UAAU,IAAI,QAAQ,CAC9B,CACHE,EAAY,EAGZJ,EAAK,iBAAiB,SAAWK,GAAU,CACvCA,EAAM,eAAc,EACpB,MAAMC,EAAQD,EAAM,cAAc,SAAS,MAAM,MAC7CC,EAAM,OAAS,EACfC,EAAS,MAAM,CACX,QAAS,2CACT,SAAU,UACtB,CAAS,EAIDC,EAAaF,CAAK,CAE1B,CAAC,EAED,MAAMG,EAAc,CAACH,EAAQ,KAAO,CAChC,MAAMI,EAAe,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAGJ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAED,OAAO,MAAM,4BAA4BI,GAAc,EAClD,KAAKC,GAAY,CACd,GAAIA,EAAS,GACT,OAAOA,EAAS,OAEhB,MAAM,IAAI,MAAM,OAAO,CAEvC,CAAS,CACT,EAEA,SAASC,EAA2BC,EAAQ,CAExC,MAAMC,EAAYD,EAAO,OAAO,CAACE,EAAM,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAClGP,EAAO;AAAA;AAAA,2BAEKE;AAAA,gCACKD,mBAA8BC,WAAuBC;AAAA;AAAA;AAAA;AAAA,oCAIjDC;AAAA;AAAA;AAAA,mCAGDC;AAAA;AAAA,uCAEIC;AAAA;AAAA,wCAECC;AAAA;AAAA;AAAA;AAAA,oBAKjC,EAAE,EACLrB,EAAQ,mBAAmB,aAAca,CAAS,CAGtD,CAEA,SAASN,EAAaF,EAAO,CACzBH,IACAF,EAAQ,UAAY,GAEpBQ,EAAYH,CAAK,EACZ,KAAKO,GAAU,CACZT,IACIS,EAAO,KAAK,SAAW,EACvBN,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC9B,CAAiB,GAGDK,EAA2BC,EAAO,IAAI,EACzB,IAAIU,EAAe,aAAc,CAAE,CAAA,EAC3C,QAAO,EAE5B,CAAS,EACA,MAAMC,GAAS,CACZpB,IACAG,EAAS,MAAM,CACX,QAAS,QACT,SAAU,UACb,CAAA,CAAE,CACf,CACA"}